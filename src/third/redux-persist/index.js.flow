// @flow
import type { Config } from './types';
import autoRehydrate from './autoRehydrate';
import getStoredState from './getStoredState';
import purgeStoredState from './purgeStoredState';

// redux dependent typing
declare type Store = Object;

// redux-persist typing
declare type Purge = (keys?: Array<string>) => void;
declare type Rehydrate = (incoming: Object, options: {| serial: boolean |}) => void;
declare type Persistor = {|
  purge: Purge,
  rehydrate: Rehydrate,
  pause: () => void,
  resume: () => void,
|};
declare type OnComplete = (err?: any, result?: Object) => void;

declare function createPersistor(store: Store, config: Config): Persistor;
declare function persistStore(store: Store, config?: Config, onComplete?: OnComplete): Persistor;

export { createPersistor, getStoredState, persistStore, purgeStoredState, autoRehydrate };

export type { Persistor, Config };
